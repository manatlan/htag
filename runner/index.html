
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="GUI toolkit for building GUI toolikit (for building applications for desktop, web, and mobile from a single python3 codebase)">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Runner - HTag's Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#runner" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="HTag&#39;s Docs" class="md-header__button md-logo" aria-label="HTag's Docs" data-md-component="logo">
      
  <img src="../htag.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            HTag's Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Runner
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/manatlan/htag" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    manatlan/htag
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="HTag&#39;s Docs" class="md-nav__button md-logo" aria-label="HTag's Docs" data-md-component="logo">
      
  <img src="../htag.png" alt="logo">

    </a>
    HTag's Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/manatlan/htag" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    manatlan/htag
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../runners/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runners
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#__init__-self-tagclass-file-properties" class="md-nav__link">
    <span class="md-ellipsis">
      __init__( self, tagClass, file, ...properties... )
    </span>
  </a>
  
    <nav class="md-nav" aria-label="__init__( self, tagClass, file, ...properties... )">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tagclasstagnone-none" class="md-nav__link">
    <span class="md-ellipsis">
      tagClass:Tag|None = None
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#filestrnone-none" class="md-nav__link">
    <span class="md-ellipsis">
      file:str|None = None
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#properties" class="md-nav__link">
    <span class="md-ellipsis">
      properties:
    </span>
  </a>
  
    <nav class="md-nav" aria-label="properties:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hoststr-127001" class="md-nav__link">
    <span class="md-ellipsis">
      host:str = "127.0.0.1"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#portint-8000" class="md-nav__link">
    <span class="md-ellipsis">
      port:int = 8000
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#interface-1" class="md-nav__link">
    <span class="md-ellipsis">
      interface = 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reloadbool-false" class="md-nav__link">
    <span class="md-ellipsis">
      reload:bool = False
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debugbool-false" class="md-nav__link">
    <span class="md-ellipsis">
      debug:bool = False
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#http_onlybool-false" class="md-nav__link">
    <span class="md-ellipsis">
      http_only:bool = False
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#use_first_free_portbool-false" class="md-nav__link">
    <span class="md-ellipsis">
      use_first_free_port:bool = False
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#add_routeselfpathstrhandler-none" class="md-nav__link">
    <span class="md-ellipsis">
      add_route(self,path:str,handler) -&gt; None
    </span>
  </a>
  
    <nav class="md-nav" aria-label="add_route(self,path:str,handler) -> None">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-serve-another-tag-class-a-common-pattern-is" class="md-nav__link">
    <span class="md-ellipsis">
      To serve another Tag Class, a common pattern is :
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-serve-an-http-ressource-a-common-pattern-is" class="md-nav__link">
    <span class="md-ellipsis">
      To serve an http ressource, a common pattern is :
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#handleself-request-tagclass-httpresponse" class="md-nav__link">
    <span class="md-ellipsis">
      handle(self, request, tagClass ) -&gt; HTTPResponse
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="runner">Runner</h1>
<p>A minimal doc ... there are a lot to say more. But this page will evolve soon.</p>
<h2 id="__init__-self-tagclass-file-properties"><code>__init__( self, tagClass, file, ...properties... )</code></h2>
<p>It's the Runner constructor</p>
<h3 id="tagclasstagnone-none">tagClass:Tag|None = None</h3>
<p>It's the tag class you want to be served at "/" path. It's the class which will be used to create the first instance when you run your app.</p>
<p>A common pattern is :
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">from</span> <span class="nn">htag</span> <span class="kn">import</span> <span class="n">Tag</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">Tag</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="o">...</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="kn">from</span> <span class="nn">htag.runners</span> <span class="kn">import</span> <span class="n">Runner</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>    <span class="n">Runner</span><span class="p">(</span><span class="n">App</span><span class="p">)</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
if you don't provide it, ensure that you <code>add_route</code> to the home path "/" (if you want to show something when you run your app)</p>
<h3 id="filestrnone-none">file:str|None = None</h3>
<p>Here you can set a filepath to a json/file, if you want to persist your session. Currently it's a json serialization, so ensure that objects you put in session are json serializable</p>
<h3 id="properties">properties:</h3>
<p>Theses properties can be set at contructor time, but are instance properties too (can be set after contructor time).</p>
<h4 id="hoststr-127001">host:str = "127.0.0.1"</h4>
<p>The IP of the host, by default it's localhost. But can be "" (empty string) to listen world wild (interest ?).</p>
<h4 id="portint-8000">port:int = 8000</h4>
<p>The port of the HTTP/WS transport.</p>
<h4 id="interface-1">interface = 1</h4>
<p>It's the more ambiguous parameter, it can takes 3 values  :</p>
<p>If it's 0|False|None -&gt; it will serve forever, without running the UI part (kind of headless mode). And the server will never quit !</p>
<p>If it's 1|True|None -&gt; it will start the UI interface (start the default browser to "/" path). And the server will autoquit if there are no more interactions (closing the tab -&gt; close the server)</p>
<p>If it's a tuple (width,height) -&gt; it will start a chrome app in app mode (chrome in headless mode), using the defined width/height. If it can't (because you don't have chrome on your computer), it will start the default browser. And the server will autoquit if there are no more interactions (closing the app -&gt; close the server)</p>
<p>example: running in "chrome app mode" (here in a window sized 640x480):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="o">...</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">Tag</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="o">...</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="k">if</span> <span class="vm">__name__</span><span class="o">==</span><span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="kn">from</span> <span class="nn">htag.runners</span> <span class="kn">import</span> <span class="n">Runner</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">Runner</span><span class="p">(</span><span class="n">App</span><span class="p">,</span><span class="n">interface</span><span class="o">=</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">480</span><span class="p">))</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<h4 id="reloadbool-false">reload:bool = False</h4>
<p>To be able to "reload" (recreate) the instances. Can be really useful during dev process !!!
Note that the reloading mechanism only works great when the "App part" is in another file, from the "Runner part" (to be able to reload by module).</p>
<p>So when you hit F5/refresh : it will recreate instances at each refresh ! (in contrario of the default, which always reuse the last instances)</p>
<h4 id="debugbool-false">debug:bool = False</h4>
<p>It's a mechanism which will override the javascript <code>window.error = function() {}</code>, to display a popup when exception comes. Can be really useful during dev process. (in the near future, it will display the exchanges in "browser debug tools / console.log", like previous )</p>
<h4 id="http_onlybool-false">http_only:bool = False</h4>
<p>Can be used to force the exchange to be HTTP only (no websocket!) ... (interest ?)</p>
<p>When it's HTTP ONLY : the <a href="../tag_update/">tag.update</a> feature can't work.</p>
<h4 id="use_first_free_portbool-false">use_first_free_port:bool = False</h4>
<p>It's a mechanism to run the "runner part" in all cases ! It will use the next free port available if the current one is already used. It can be useful in some cases.</p>
<h2 id="add_routeselfpathstrhandler-none"><code>add_route(self,path:str,handler) -&gt; None</code></h2>
<p>This method let you create a a new route to be able to serve:
- another Tag Class (using <code>self.handle(request, tagClass) -&gt; HTTPResponse</code>, see below)
- another http ressource (ex: a jpg, png, html, js ...)</p>
<h3 id="to-serve-another-tag-class-a-common-pattern-is">To serve another Tag Class, a common pattern is :</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">from</span> <span class="nn">htag</span> <span class="kn">import</span> <span class="n">Tag</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">Tag</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="o">...</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="k">class</span> <span class="nc">App2</span><span class="p">(</span><span class="n">Tag</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>    <span class="o">...</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>    <span class="kn">from</span> <span class="nn">htag.runners</span> <span class="kn">import</span> <span class="n">Runner</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a>    <span class="n">app</span><span class="o">=</span><span class="n">Runner</span><span class="p">(</span><span class="n">App</span><span class="p">)</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a>    <span class="n">app</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span> <span class="s2">&quot;/other&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">request</span><span class="p">:</span> <span class="n">app</span><span class="o">.</span><span class="n">handle</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">App2</span> <span class="p">)</span> <span class="p">)</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>When serving a Tag Class, you can't set "path parameters" (things like '/item/{idc}') in the route ! But you can get the <a href="../query_params/">query parameters</a> of the url, to initialize your init constructor of your Tag class. Note that "query parameters" are also available for your default home route ("/").</p>
<h3 id="to-serve-an-http-ressource-a-common-pattern-is">To serve an http ressource, a common pattern is :</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">from</span> <span class="nn">htag</span> <span class="kn">import</span> <span class="n">Tag</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">Tag</span><span class="o">.</span><span class="n">body</span><span class="p">):</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="o">...</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>    <span class="kn">from</span> <span class="nn">htag.runners</span> <span class="kn">import</span> <span class="n">Runner</span><span class="p">,</span> <span class="n">HTTPResponse</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    <span class="n">app</span><span class="o">=</span><span class="n">Runner</span><span class="p">(</span><span class="n">App</span><span class="p">)</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">handlerItem</span><span class="p">(</span> <span class="n">request</span> <span class="p">):</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>        <span class="n">idx</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">path_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;idx&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>        
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>        <span class="n">txt</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">query_params</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;txt&quot;</span><span class="p">,</span><span class="s2">&quot;???&quot;</span><span class="p">)</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>        <span class="k">return</span> <span class="n">HTTPResponse</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="s2">&quot;Number </span><span class="si">%d</span><span class="s2"> (txt=</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">txt</span><span class="p">))</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>    <span class="n">app</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span> <span class="s2">&quot;/item/{idx:int}&quot;</span><span class="p">,</span> <span class="n">handlerItem</span> <span class="p">)</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>    <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre></div>
<p>Note that <code>request</code> have 2 dict property :</p>
<ul>
<li><code>path_params</code> : to expose path parameters, when defined in routes (as starlette.add_route does)</li>
<li><code>query_params</code> : to expose query parameters (ex: https://example.com/item/42?a=42&amp;b=toto -&gt; {"a":"42","b":"toto"})</li>
</ul>
<p>Note that path params can be :</p>
<ul>
<li>"/item/{idx}" : idx will be str.</li>
<li>"/item/{idx:str}" : idx will be str.</li>
<li>"/item/{idx:int}" : idx will be int.</li>
<li>"/item/{idx:path}" : idx will be the rest of the path (with url "/item/box/1", idx will be 'box/1')</li>
</ul>
<h2 id="handleself-request-tagclass-httpresponse"><code>handle(self, request, tagClass ) -&gt; HTTPResponse</code></h2>
<p>It's an internal method, but can be used with <code>self.add_route(path,request)</code> (see upper).</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>